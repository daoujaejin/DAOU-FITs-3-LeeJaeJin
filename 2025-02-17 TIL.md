# Servlet 구현 및 Client가 호출

## 1. Web Project 생성

- JDK(1.8), tomcat(9), Jakarta EE 버전 맞추기
- html → webapp 폴더 안에 정적으로 만든다.

## 2. Toncat을 이용해서 Deploy를 한다.

이 때 application context를 수정해서 활용할 수 있다.

## 3. Servlet이라고 불리는 Java program을 작성해서 web client가 호출해서 그 결과를 browser를 통해서 받아보려면?

- Servlet은 interface이다.
    
    이 interface를 직접적으로 구현하는 것이 아니라, 이미 구현된
    
    Servlet - GenericServlet class - **HttpServlet class**를 사용한다.
    
    → HttpServlet class를 상속해서 사용한다.
    
- 상속되는 method가 있다.
    - **init()** : 서블릿 객체가 생성될 때 초기화를 담당하는 메소드
        
        → 생성자 대신 init()
        
    - **service()** : 클라이언트가 서블릿을 실행할 때 호출되는 메소드
        
        service()는 하는일이 구현되어 있기 때문에 overriding하지 않는다.
        
        - 클라이언트의 요청이 GET방식 → doGet() 호출
        - 클라이언트의 요청이 POST방식 → doPost() 호출
    - **doGet(), doPost()** : 클라이언트가 원하는 작업을 수행하는 메소드
        
        두 개의 메소드를 overriding해야 한다.
        
    - **destroy()** : servlet instance가 WAS에서 삭제될 때 수행되는 메소드
        
        → 사용하고 있는 여러 resource들을 해제해야 한다.
        

## 4. Client가 GET방식으로 Servlet을 호출했을 때 간단하게 response를 전송하는 Servlet을 실제로 구현

- 클라이언트가 서블릿을 호출하는 방법을 제공해야 한다.
    - servlet의 논리적인 이름을 하나 부여해서 그것을 클라이언트가 이용해서 servlet을 호출할 수 있도록 한다.
        1. .xml 파일을 이용해서 그 설정을 잡을 수 있다.
            
            단점: xml을 이용하기 때문에 번거롭다.
            
            장점: 전테적인 이름관리를 하나의 파일에서 할 수 있어서 관리면에서는 좋다.
            
        2. annotation을 이용해서 이름을 설정할 수 있다.
            
            = 일반적인 방식 (직관적)
            
    - doGet()에서 클라이언트에게 내용을 전달하려면?
    
    → PrintWriter를 이용해서 클라이언트에게 데이터 연결 통로를 열고 전달한다. (contenttype을 잘 설정해야 한다.)
    

# 클라이언트가 서블릿에게 데이터를 전달

## 1. GET 방식

- Query String을 이용해서 데이터를 전달하는 방식을 사용
    
    Query String = 특수한 형식을 가진 문자열
    
    `?변수=값&변수=값&변수=값`
    
    ex) ?name=홍길동&age=20&address=서울
    
    → http://localhost:8080/HelloServletProject/myServlet?name=홍길동&age=20&address=서울
    
- 서버쪽(서블릿)에서는 전달된 데이터를 받아야 한다.
    
    `getParameter(”변수명”)`
    
- 이런 데이터 전달 방식은 문제가 있다.
    - URL에 데이터가 노출된다.
        
        보안성이 전혀 없다. (128bit 암호화를 이용해서 처리한다.)
        
    - URL 길이 제한
        
        많은 양의 데이터를 보낼 수는 없다.
        

## 2. POST 방식

- 보안성이 약간 있다.
    
    브라우저 주소창에 변수와 값에 대한 내용이 표현되지 않는다.
    
- request header에 포함되어서 데이터가 전달되기 때문에 길이의 제한이 없다.
- HTML의 특수한 태그를 이용해서 서버쪽 프로그램(서블릿)을 호출하는 구조
- 클라이언트에게 보여줄 HTML을 하나 만든다. (입력양식을 표현하는 HTML을 작성)
    
    ```java
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
    </head>
    <body>
      <h1>서버에 전달할 데이터를 입력하세요!</h1>
      <form action="http://localhost:8080/HelloServletProject/myServlet"
            method="POST">
        이름: <input name="name" type="text" /><br><br>
        나이: <input name="age" type="number" />
        <input type="submit" value="서버로 전송">
      </form>
    </body>
    </html>
    ```
