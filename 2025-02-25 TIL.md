# DB 수정 내용

- Stocks 테이블
    - exchangeCode 삭제
    - stockTicker 에는 종목에 대한 정보만
- Offers 테이블
    - 거래소 선택 정보 exchangeCode {0 : 미지정, 1 : 한국거래소, 2 :대체거래소}
    - offerNumber NUMBER로 수정, SEQ 지정해서 auto_increments
- Trades 테이블
    - 실제로 거래 체결된 거래소 정보 exchangeActual {0 : 미지정, 1 : 한국거래소, 2 :대체거래소}

```sql
-- Stocks 테이블에서 exchangeCode 컬럼 삭제
ALTER TABLE Stocks DROP COLUMN exchangeCode;

-- Offers 테이블에 exchangeCode 컬럼 추가 (CHECK 제약조건 없이)
ALTER TABLE Offers ADD exchangeCode NUMBER(1) DEFAULT 0 NOT NULL;

-- Offers 테이블의 offerNumber에 시퀀스 추가 및 자동 증가 기능 구현
CREATE SEQUENCE offers_seq START WITH 1 INCREMENT BY 1 NOCACHE;

-- Offers 테이블에서 offerNumber 컬럼을 NUMBER로 변경 및 기본값 시퀀스 설정
ALTER TABLE Offers MODIFY offerNumber NUMBER DEFAULT OFFER_SEQ;

-- Trades 테이블에 exchangeActual 컬럼 추가 (CHECK 제약조건 없이)
ALTER TABLE Trades ADD exchangeActual NUMBER(1) DEFAULT 0 NOT NULL;

-- Offers 테이블 creationTimestamp 디폴트 설정
ALTER TABLE OFFERS MODIFY CREATIONTIMESTAMP TIMESTAMP DEFAULT SYSTIMESTAMP;

-- Offers 테이블 updateTimestamp 디폴트 설정
ALTER TABLE OFFERS MODIFY UPDATETIMESTAMP TIMESTAMP DEFAULT NULL;

```

---

- Trades, Offers 테이블에 데이터 `PK인 number` , `timestamp 2개` 제외하고 모두 values로 넣어서 INSERT할 수 있게 하기. → auto increment 설정하기
    - updateTimestamp는 기본값이 null, SQL UPDATE시 직접 넣어야함!
- DB에 TradeKey → TradeDate로 바꾸기. (코드 VO에서는 바꿔놓음)
- 주문 테이블의 `offerNumber` , 체결 테이블의 `tradeNumber` , ~~보유종목 테이블의 `accountNumber`~~ 자료형 int로 바꾸기 (코드 VO에서는 바꿔놓음)

```mermaid

```

---

- 필요 없는 속성 삭제

- api로 받아오는 데이터 목록
    
    # 유가증권 단축 종목코드 [005930]
    영업시간 [102615]
    
    ## 매도호가10 [58400] 잔량10 [82479]
    매도호가09 [58300] 잔량09 [62287]
    매도호가08 [58200] 잔량08 [64720]
    매도호가07 [58100] 잔량07 [62110]
    매도호가06 [58000] 잔량06 [99422]
    매도호가05 [57900] 잔량05 [85745]
    매도호가04 [57800] 잔량04 [142381]
    매도호가03 [57700] 잔량03 [131679]
    매도호가02 [57600] 잔량02 [177400]
    매도호가01 [57500] 잔량01 [207146]
    
    매수호가01 [57400]    잔량01 [102589]
    매수호가02 [57300]    잔량02 [222131]
    매수호가03 [57200]    잔량03 [151736]
    매수호가04 [57100]    잔량04 [175506]
    매수호가05 [57000]    잔량05 [216651]
    매수호가06 [56900]    잔량06 [192796]
    매수호가07 [56800]    잔량07 [216037]
    매수호가08 [56700]    잔량08 [267181]
    매수호가09 [56600]    잔량09 [284459]
    매수호가10 [56500]    잔량10 [378923]
