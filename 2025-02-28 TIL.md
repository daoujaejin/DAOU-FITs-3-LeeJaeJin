학습일자: 2025년 02월 28일

## 학습하는데 어떤 문제에 부딪혔는지

프로젝트 진행 중, DB에서 가져온 데이터를 JSP 파일에 넘겨주는 과정에서 오류가 발생하였다.

## 그 문제를 해결하기 위해 내가 시도 해본 것은

우선 해당 문제의 원인을 파악하였다. 지금까지 AJAX 방식을 통해 Servlet을 호출하면 가져온 데이터들을 JSON 형식으로 반환했다. 문제의 발생은 사소한 부분에서 이뤄졌다는 사실을 알 수 있었다.

## 어떻게 그 문제를 해결 했는지

StringBuilder를 통해서 받은 객체의 값을 직접 JSON형태로 변화시켜주고 있었는데, 이 과정에서 사소한 오류가 발생했다. 그리고 이 사소한 오류가 전체 화면의 오류를 발생시켰다는 것을 알 수 있었다. 이에, 이를 조금 더 간편하고 확실하게 바꿔줄 수 있는 라이브러리, Gson을 찾을 수 있었다.

## 오늘 내가 새롭게 배운 것은 무엇인지

```java
            jsonBuilder.append("["); // JSON 배열 시작
            for(int i = 0; i < response.size(); i++) {
                NotTradedResponseVO vo = response.get(i);
                jsonBuilder.append("{")
                        .append("\"accountNumber\":\"").append(vo.getAccountNumber()).append("\",")
                        .append("\"offerNumber\":").append(vo.getOfferNumber()).append(",")
                        .append("\"stockName\":\"").append(vo.getStockName()).append("\",")
                        .append("\"type\":\"").append(vo.getType()).append("\",")
                        .append("\"orderPrice\":").append(vo.getOrderPrice()).append(",")
                        .append("\"orderQuantity\":").append(vo.getOrderQuantity())
                        .append("}");

                if(i < response.size() - 1) {
                    jsonBuilder.append(","); // 마지막 객체가 아니면 쉼표 추가
                }
            }
            jsonBuilder.append("]"); // JSON 배열 종료
```

기존 JSON 변환 방법은 위와 같았다. 위 방법은 아무런 라이브러리 설치 없이 사용할 수 있다는 장점이 있지만, 작은 오류 하나로 전체 반환값을 못쓸 수 있다는 단점이 있었다.

이에, Gson 라이브러리를 추가했으며 이를 통해서

```java
Gson gson = new GsonBuilder().create();
String json = gson.toJson(response);
```

코드를 극단적으로 효율적으로 작성할 수 있게 되었다.
라이브러리 사용을 통해서 더욱 더 정확하고 효율적인 프로젝트 진행이 가능해졌으며, 추후 다른 프로젝트를 진행할 때 해당 라이브러리를 이용할 수 있겠다고 생각했다.
