# 기본 개념 (용어)

## Internet

- **LAN**
    
    Local Area Network
    
    작은 컴퓨터 연결의 집합
    
    → MAN, WAN 으로 확대된다.
    
- **Internet**
    
    전 세계 LAN들을 모아서 만든 네트워크 망
    
    → 물리적인 플랫폼을 지칭한다.
    

→ 인터넷 망 위에사 Service가 실행된다. (email, web, ...)

## 데이터 통신을 하려면

주소 체계를 이용한다.

- 논리적인 주소인 **IP Address**를 사용
    
    → **NIC(Network Interface Card)**에 부여
    
    - V4
    - V6
- 논리적인 주소는 바뀔 수 있기 때문에 물리적 주소가 필요하다.
    
    = **MAC Address**
    

## IP Address

- 컴퓨터를 구분하기 위한 숫자 (32bit)
- 숫자를 외우기 어렵기 때문에 문자로 표현한 값
    
    = **DNS (Domain Name System)**
    
- Network에 참여하고 있는 컴퓨터를 식별

## Port

- IP Address로 특정 컴퓨터를 찾아갔을 때, 원하는 프로세스를 찾아가기 위한 번호
- 한 컴퓨터 안에서 port 번호는 유니크하다.

## Protocol

- 데이터 통신을 위해서 서로 지켜야하는 약속
    
    HTTP, FTP, SMTP, …
    

## HTTP

- Hyper Text Transfer Protocol
- web service에서 통신을 할 때 사용되는 Protocol
    
    cs (Client-Server) 구조
    
    - Web Client → Web Browser (Chrome, Edge)
        
        상대적으로 다수
        
        요청(request)을 한다.
        
    - Web Server
        
        상대적으로 소수
        
        응답(response)을 한다.
        
- Stateless Protocol (무상태 Protocol)
    
    서버가 클라이언트의 상태를 저장하지 않는 통신 방식
    

## Web Service

1. Static web
    
    웹 클라이언트가 웹 서버에 요청을 하면
    
    웹 서버가 정적 resource에서 답을 찾아서 응답을 한다.
    
    → 웹의 초창기에는 잘 사용했다.
    
2. Dynamic web
    
    웹 클라이언트가 프로그램 실행 요청을 한다.
    
    웹 서버가 프로그램일 직접 실행하지 못하기 때문에 위임을 한다.
    
    → WAS(Web Application Server)에 프로그램 실행을 요청한다.
    
    - 웹서버: Apache(기능이 많고 무거움), Nginx(가벼움)
    - WAS: Tomcat(웹서버 + WAS)

# Tomcat

- Web Server, WAS 모두 돌아감
- WAS 안에 html 파일이 들어 있어 Tomcat이 configured해서 돌아간다.

## 정적 resource

Deploy 진행 → 정적 resource (html) 사용 → response

## Suvlet 구현

web에서 실행할 수 있는 java 프로그램(class)을 작성

- Survlet Interface를 구현해서 class를 생성
    
    = 사용하기 불편
    
- HttpServlet class를 제공하고 이 class를 작성 (상속)

1. HTTP request(문자열)가 WAS로 들어오면서 객체가 된다.
2. 객체를 service()에 전달
3. service()는 client의 요청이 
    - Get 방식이면 doGet()를,
    - Post 방식이면 doPost()를
    
    호출한다.
    
4. client가 원하는 일이 끝나면 client를 위해서 만들어 놓은 thread가 response된다.
    
    (객체는 그대로 남는다)
    
5. 다른 client가 또 요청을 하면 새로운 객체를 만들지 않고, 기존의 객체를 활용한다. (thread만 새로 만듦)

```java
package org.example.hellosuvletproject;

import jakarta.servlet.ServletConfig;
import jakarta.servlet.ServletException;
import jakarta.servlet.annotation.WebServlet;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

import java.io.IOException;
import java.io.PrintWriter;

@WebServlet("/myservlet")
public class MyHello extends HttpServlet {

    MyHello() {
    }

    // 기본적으로 overriding해야 하는 method가 있다.

    // surclet 초기화
    @Override
    public void init(ServletConfig config) throws ServletException {
        // 서블릿 초기화 method
        System.out.println("init 호출되었어요!");
        super.init(config);
    }

    // client의 요청이 무엇인지 구분하고 다른 메서드 호출
    @Override
    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        super.service(req, resp);
        System.out.println("service가 호출되었어요!");
        // 이미 하는 일이 잘 만들어져 있기 때문에
        // 일반적으로 service는 overriding하지 않는다.
    }

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        // 만약 Client가 Get방식으로 요청했으면
        // toGet()이 호출되고
        // 입력받고
        // 지금은 입력받을게 없다.

        // 로직처리하고
        // 별도의 로직처리도 없다.

        // 출력처리하면 된다.
        // Client에게 돌아가는 출력 내용은 인자로 들어오는 resp를 이용한다.

        // 1. Client에게 연결된 데이터 통로를 뚫는다.
        PrintWriter out = resp.getWriter();
        out.println("<html><head></head><body>");
        out.println("<h1>Hello World!</h1>");
        out.println("</body></html>");
        out.close();
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        super.doPost(req, resp);
    }
}

```

## Servlet을 실행하려면

`http://localhost:8080/HelloSuvletProject_war_exploded/myservlet`

1. protocol → http
2. 실행할 서버쪽 컴퓨터의 ip → localhost
3. 웹서버의 포트번호 → 8080
4. 프로젝트 context → /HelloSuvletProject_war_exploded
5. 해당 프로젝트의 servlet에 대한 url mapping → /myservlet
